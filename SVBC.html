<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DVR iPTV</title>
<style>
  body { background-color: #0a0a0a; color: white; font-family: "Segoe UI", sans-serif; margin: 0; padding: 0; }
  header { background-color: #330000; padding: 20px; font-size: 20px; font-weight: bold; letter-spacing: 5px;
    display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
  .logo { flex: 1; text-align: left; }
  .search { flex: 1; text-align: right; }
  .search input { padding: 8px 12px; border-radius: 20px; border: none; font-size: 14px; outline: none; max-width: 200px; }
  .video-wrapper { position: sticky; top: 0; z-index: 999; background-color: #0a0a0a; }
  .video-container { max-width: 900px; margin: auto; padding: 10px; position: relative; }
  #player,#ytplayer { width: 100%; height: 500px; border-radius: 10px; overflow: hidden; background:#000; display:none; }
  #epg { margin-top: 15px; color: #fff; font-size: 15px; background: #330000; padding: 10px; border-radius: 100px; display: none; }
  h2 { margin-left: 20px; color: #ff6666; font-size: 20px; border-left: 10px solid #cc0000; padding-left: 10px; }
  .channel-group { margin-bottom: 20px; }
  .channel-list { display: flex; flex-wrap: wrap; gap: 15px; padding: 1px 10px; }
  .channel { width: 100px; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; text-align: center; position: relative; }
  .channel:hover, .channel.active-channel { transform: scale(1.08); box-shadow: 0 0 10px #ff0000; border: 2px solid #ffffff; }
  .channel img { width: 100%; border-radius: 15px; border: 1px solid #ffffff; }
  .channel-name { margin-top: 6px; font-size: 14px; }
  footer { text-align: center; padding: 20px; color: #bfbfbf; font-size: 14px; }
  @media (max-width: 600px) {
    header { font-size: 20px; padding: 15px; }
    h2 { font-size: 18px; margin-left: 10px; padding-left: 8px; }
    .channel { width: 80px; }
    .channel-name { font-size: 11px; }
    .video-container { padding: 5px; }
    footer { font-size: 12px; padding: 15px; }
    #player,#ytplayer { height: 250px; }
  }
</style>
</head>
<body>

<header>
  <div class="logo">DVR <span style="color:#ff4d4d;">iPTV</span></div>
  <div class="search"><input type="text" id="channelSearch" placeholder="ðŸ”Ž Search Channels..." /></div>
</header>

<div class="video-wrapper">
  <div class="video-container">
    <div id="player"></div>
    <iframe id="ytplayer" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    <div id="epg"><strong>NOW Playing:</strong> <span id="nowTitle">Loading...</span><br>
    <strong>NEXT:</strong> <span id="nextTitle">Coming soon...</span></div>
  </div>
</div>

<div id="channel-container"></div>

<footer>Â© 2025 DVR iPTV â€” FOR EDUCATIONAL PURPOSES ONLY</footer>

<!-- PlayerJS -->
<script src="https://venkatmitv0-byte.github.io/Azee/playerjs.js"></script>

<script>
let player; 
// simple demo channels array (mix of m3u8 + YouTube live)
const channels=[
  {
    name:"SVBC HD",
    logo:"https://www.pngkit.com/png/detail/249-2496122_svbc-live-tirumala-tirupati-devasthanam-logo.png",
    url:"https://www.youtube.com/live/W3KGDnFPUmI",
    type:"youtube"
  },
  {
    name:"SRISAILA HD",
    logo:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQH9_tT11omgqCm0T30VlvuWLYO5dfRrs2_DUpDxiqXVg&s=10",
    url:"https://www.youtube.com/live/YvZMk6OExUQ?si=XO1Zckqo9R8o51wA",
    type:"youtube"
  }
];

function initPlayer(url){
  if(player){player.api("destroy");}
  document.getElementById("ytplayer").style.display="none";
  document.getElementById("player").style.display="block";
  player=new Playerjs({id:"player", file:url, autoplay:true, mute:false});
}

function playYouTube(yurl){
  // extract video id
  let vid=yurl.match(/(?:v=|\/live\/)([A-Za-z0-9_\-]+)/);
  vid=vid?vid[1]:null;
  if(!vid) return;
  document.getElementById("player").style.display="none";
  const iframe=document.getElementById("ytplayer");
  iframe.style.display="block";
  iframe.src="https://www.youtube.com/embed/"+vid+"?autoplay=1&mute=1";
}

function renderChannels(){
  const container=document.getElementById("channel-container");
  container.innerHTML="<h2>Channels</h2><div class='channel-list' id='chlist'></div>";
  const list=document.getElementById("chlist");
  channels.forEach(ch=>{
    const div=document.createElement("div");
    div.className="channel";
    div.innerHTML=`<img src="${ch.logo}" alt="${ch.name}"><div class="channel-name">${ch.name}</div>`;
    div.onclick=()=>{
      document.querySelectorAll('.channel').forEach(el=>el.classList.remove('active-channel'));
      div.classList.add('active-channel');
      document.getElementById("epg").style.display="block";
      document.getElementById("nowTitle").innerText=ch.name;
      document.getElementById("nextTitle").innerText="Coming up soon...";
      if(ch.type==="m3u8"){ initPlayer(ch.url); }
      else if(ch.type==="youtube"){ playYouTube(ch.url); }
    };
    list.appendChild(div);
  });
}

// search filter
document.getElementById("channelSearch").addEventListener("input",function(){
  const term=this.value.toLowerCase();
  document.querySelectorAll(".channel").forEach(channel=>{
    const name=channel.querySelector(".channel-name").innerText.toLowerCase();
    channel.style.display=name.includes(term)?"block":"none";
  });
});

renderChannels();

// âœ… Auto play first channel after rendering:
window.addEventListener("load",()=>{
  const firstChannel=document.querySelector(".channel");
  if(firstChannel){ firstChannel.click(); }
});
</script>
</body>
</html>
